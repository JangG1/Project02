{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  name: \"TTSStorageCard\",\n  props: {\n    voice_no: Number,\n    email: String,\n    kind: String,\n    input: String,\n    output: String,\n    trans_date: String\n  },\n\n  data() {\n    return {\n      showInput: false,\n      showOutput: true,\n      btnText: \"텍스트 보기\"\n    };\n  },\n\n  methods: {\n    changeText(check) {\n      if (check) this.btnText = \"텍스트 보기\";else this.btnText = \"오디오 보기\";\n    },\n\n    changeShow() {\n      if (this.showInput) {\n        this.showInput = false;\n      } else {\n        this.showInput = true;\n      }\n\n      if (this.showOutput) {\n        this.showOutput = false;\n      } else {\n        this.showOutput = true;\n      }\n\n      this.changeText(this.showOutput);\n    },\n\n    async remove() {\n      let str = \"/api/tts/remove\";\n      let form = new FormData();\n      form.append(\"email\", this.email);\n      form.append(\"voice_no\", this.voice_no);\n      await axios.post(str, form).then(res => {\n        console.log(res);\n      }).catch(err => {\n        console.log(err);\n      });\n      this.$router.go(\"/storage\");\n    },\n\n    download() {\n      let str = \"/api/tts/download/\" + this.email + \"/\" + this.voice_no + \"/\";\n      if (this.showInput) str += \"input\";else str += \"output\";\n      axios.get(str, {\n        responseType: \"blob\"\n      }).then(res => {\n        const name = res.headers[\"content-disposition\"].split(\"fileName=\")[1].replace(/\"/g, \"\");\n        const url = window.URL.createObjectURL(new Blob([res.data]));\n        const link = document.createElement(\"a\");\n        link.href = url;\n        link.setAttribute(\"download\", name); //or any other extension document.body.appendChild(link); link.click();\n\n        document.body.appendChild(link);\n        link.click();\n        link.remove();\n        console.log(res);\n        console.log(\"다운로드 성공\");\n      }).catch(err => {\n        err;\n        console.log(\"다운로드 실패\");\n      });\n    }\n\n  },\n  computed: {\n    content() {\n      return this.input.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br />\");\n    },\n\n    text() {\n      return this.btnText;\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","props","voice_no","Number","email","String","kind","input","output","trans_date","data","showInput","showOutput","btnText","methods","changeText","check","changeShow","remove","str","form","FormData","append","post","then","res","console","log","catch","err","$router","go","download","get","responseType","headers","split","replace","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","computed","content","text"],"sourceRoot":"","sources":["C:\\study_boot\\BCPR3\\front_vue2\\src\\components\\TTSStorageCard.vue"],"sourcesContent":["<template>\r\n  <div class=\"storage-ts-container mb-5\">\r\n    <div class=\"storage-ts-output-cont\">\r\n      <div style=\"float: left; width: 20%\">\r\n        <h2>음성변환</h2>\r\n      </div>\r\n      <div style=\"float: left; width: 75%\">\r\n        <h3>{{ trans_date }}</h3>\r\n      </div>\r\n      <div style=\"float: right; width: 5%\">\r\n        <button @click=\"remove()\">삭제</button>\r\n      </div>\r\n      <div class=\"storage-img-box\">\r\n        <audio class=\"img-fit\" controls ref=\"player\" v-show=\"showOutput\">\r\n          <source :src=\"output\" />\r\n        </audio>\r\n\r\n        <output name=\"result\" v-show=\"showInput\">\r\n          <div v-html=\"content\"></div>\r\n        </output>\r\n      </div>\r\n      <div style=\"display: flex\">\r\n        <button @click=\"changeShow()\" class=\"storage-ff1-btn mt-4\">\r\n          {{ text }}\r\n        </button>\r\n        <button @click=\"download()\" class=\"storage-ff2-btn mt-4\">\r\n          다운로드\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <!--storage-ts-output-cont-end-->\r\n  </div>\r\n  <!--storage-ts-container-end-->\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nexport default {\r\n  name: \"TTSStorageCard\",\r\n  props: {\r\n    voice_no: Number,\r\n    email: String,\r\n    kind: String,\r\n    input: String,\r\n    output: String,\r\n    trans_date: String,\r\n  },\r\n  data() {\r\n    return {\r\n      showInput: false,\r\n      showOutput: true,\r\n      btnText: \"텍스트 보기\",\r\n    };\r\n  },\r\n  methods: {\r\n    changeText(check) {\r\n      if (check) this.btnText = \"텍스트 보기\";\r\n      else this.btnText = \"오디오 보기\";\r\n    },\r\n    changeShow() {\r\n      if (this.showInput) {\r\n        this.showInput = false;\r\n      } else {\r\n        this.showInput = true;\r\n      }\r\n      if (this.showOutput) {\r\n        this.showOutput = false;\r\n      } else {\r\n        this.showOutput = true;\r\n      }\r\n      this.changeText(this.showOutput);\r\n    },\r\n    async remove() {\r\n      let str = \"/api/tts/remove\";\r\n      let form = new FormData();\r\n      form.append(\"email\", this.email);\r\n      form.append(\"voice_no\", this.voice_no);\r\n\r\n      await axios\r\n        .post(str, form)\r\n        .then((res) => {\r\n          console.log(res);\r\n        })\r\n        .catch((err) => {\r\n          console.log(err);\r\n        });\r\n      this.$router.go(\"/storage\");\r\n    },\r\n    download() {\r\n      let str = \"/api/tts/download/\" + this.email + \"/\" + this.voice_no + \"/\";\r\n      if (this.showInput) str += \"input\";\r\n      else str += \"output\";\r\n\r\n      axios\r\n        .get(str, {\r\n          responseType: \"blob\",\r\n        })\r\n        .then((res) => {\r\n          const name = res.headers[\"content-disposition\"]\r\n            .split(\"fileName=\")[1]\r\n            .replace(/\"/g, \"\");\r\n          const url = window.URL.createObjectURL(new Blob([res.data]));\r\n          const link = document.createElement(\"a\");\r\n          link.href = url;\r\n          link.setAttribute(\"download\", name); //or any other extension document.body.appendChild(link); link.click();\r\n          document.body.appendChild(link);\r\n          link.click();\r\n          link.remove();\r\n          console.log(res);\r\n          console.log(\"다운로드 성공\");\r\n        })\r\n        .catch((err) => {\r\n          err;\r\n          console.log(\"다운로드 실패\");\r\n        });\r\n    },\r\n  },\r\n  computed: {\r\n    content() {\r\n      return this.input.replace(/(?:\\r\\n|\\r|\\n)/g, \"<br />\");\r\n    },\r\n    text() {\r\n      return this.btnText;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.player {\r\n  width: 100%;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}